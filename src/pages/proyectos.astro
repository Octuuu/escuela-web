---
import Layout from "../layouts/Layout.astro";
import Foro from '../pages/foro.astro';
import ProjectForm from "../components/ProyectoForm.astro";

import ProyectoCard from '../components/ProyectoCard.astro';

interface Proyecto {
  id: number;
  title: string;
  description: string;
  image: string | null;
  pdf: string | null;
}

const response = await fetch('https://ifd-backend-production.up.railway.app/api/proyectos');
const proyectos: Proyecto[] = await response.json();
---

<Layout>
    <section>
  
        <ProjectForm />
        <h2 class="text-3xl font-bold text-center text-gray-800 dark:text-white mb-8">Proyectos Subidos</h2>
        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
            {proyectos.map((p) => (
                <ProyectoCard {...p} />
            ))}
            
        </div>

        <Foro />


    </section>
</Layout>